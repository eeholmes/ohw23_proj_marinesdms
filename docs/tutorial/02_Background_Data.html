<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2023 Ocean Hackweek - Getting background data from OBIS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../tutorial/03_sdmpredictors-variables.html" rel="next">
<link href="../tutorial/01_Presence_Data.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../site_libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="../site_libs/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="../site_libs/HomeButton-0.0.1/home-button.js"></script>
<script src="../site_libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="../site_libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="../site_libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="../site_libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Getting background data from OBIS</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../" class="sidebar-logo-link">
      <img src="https://oceanhackweek.org/_static/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://oceanhackweek.org/" title="OceanHackWeek" class="sidebar-tool px-1"><i class="bi bi-globe"></i></a>
    <a href="https://github.com/oceanhackweek" title="GitHub" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Background</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/Roadmap.html" class="sidebar-item-text sidebar-link">Roadmap</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/01_Presence_Data.html" class="sidebar-item-text sidebar-link">Marine Presence Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/02_Background_Data.html" class="sidebar-item-text sidebar-link active">Generating Absence Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/03_sdmpredictors-variables.html" class="sidebar-item-text sidebar-link">Environmental Variables</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/04_models.html" class="sidebar-item-text sidebar-link">Models</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">Our workflow</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/seaturtle_robis.html" class="sidebar-item-text sidebar-link">Presence Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/background.html" class="sidebar-item-text sidebar-link">Absence Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/occ_env.html" class="sidebar-item-text sidebar-link">Environmental Data</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Turtle SDMs!!</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorial/Mackenzie_SDM_with_maxent.html" class="sidebar-item-text sidebar-link">SDM</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#loading-libraries" id="toc-loading-libraries" class="nav-link active" data-scroll-target="#loading-libraries">Loading libraries</a></li>
  <li><a href="#set-up" id="toc-set-up" class="nav-link" data-scroll-target="#set-up">Set-up</a>
  <ul class="collapse">
  <li><a href="#setting-base-directories" id="toc-setting-base-directories" class="nav-link" data-scroll-target="#setting-base-directories">Setting base directories</a></li>
  <li><a href="#loading-bounding-box-for-region-of-interest" id="toc-loading-bounding-box-for-region-of-interest" class="nav-link" data-scroll-target="#loading-bounding-box-for-region-of-interest">Loading bounding box for region of interest</a></li>
  <li><a href="#plotting-region-of-interest" id="toc-plotting-region-of-interest" class="nav-link" data-scroll-target="#plotting-region-of-interest">Plotting region of interest</a></li>
  </ul></li>
  <li><a href="#approach-1-use-other-species" id="toc-approach-1-use-other-species" class="nav-link" data-scroll-target="#approach-1-use-other-species">Approach 1: Use other species</a>
  <ul class="collapse">
  <li><a href="#getting-occurrence-data-from-obis" id="toc-getting-occurrence-data-from-obis" class="nav-link" data-scroll-target="#getting-occurrence-data-from-obis">Getting occurrence data from OBIS</a></li>
  <li><a href="#defining-relevant-columns" id="toc-defining-relevant-columns" class="nav-link" data-scroll-target="#defining-relevant-columns">Defining relevant columns</a></li>
  <li><a href="#querying-obis" id="toc-querying-obis" class="nav-link" data-scroll-target="#querying-obis">Querying OBIS</a></li>
  <li><a href="#saving-background-data" id="toc-saving-background-data" class="nav-link" data-scroll-target="#saving-background-data">Saving background data</a></li>
  <li><a href="#optional-load-background-data" id="toc-optional-load-background-data" class="nav-link" data-scroll-target="#optional-load-background-data">(Optional) Load background data</a></li>
  <li><a href="#plotting-background-data" id="toc-plotting-background-data" class="nav-link" data-scroll-target="#plotting-background-data">Plotting background data</a></li>
  </ul></li>
  <li><a href="#approach-2.-random-points-in-our-region" id="toc-approach-2.-random-points-in-our-region" class="nav-link" data-scroll-target="#approach-2.-random-points-in-our-region">Approach 2. Random points in our region</a>
  <ul class="collapse">
  <li><a href="#loading-raster-layer-for-area-of-interest" id="toc-loading-raster-layer-for-area-of-interest" class="nav-link" data-scroll-target="#loading-raster-layer-for-area-of-interest">Loading raster layer for area of interest</a></li>
  <li><a href="#sample-points-from-bathymetry-layer" id="toc-sample-points-from-bathymetry-layer" class="nav-link" data-scroll-target="#sample-points-from-bathymetry-layer">Sample points from bathymetry layer</a></li>
  <li><a href="#plotting-results" id="toc-plotting-results" class="nav-link" data-scroll-target="#plotting-results">Plotting results</a></li>
  <li><a href="#saving-background-samples" id="toc-saving-background-samples" class="nav-link" data-scroll-target="#saving-background-samples">Saving background samples</a></li>
  </ul></li>
  <li><a href="#approach-3.-random-points-a-convex-hull" id="toc-approach-3.-random-points-a-convex-hull" class="nav-link" data-scroll-target="#approach-3.-random-points-a-convex-hull">Approach 3. Random points a convex hull</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/oceanhackweek/ohw23_proj_marinesdms/edit/main/tutorial/02_Background_Data.Rmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/oceanhackweek/ohw23_proj_marinesdms/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Getting background data from OBIS</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>In this notebook, we will explore three approaches to create background samples, aka pseudo absences. These are points where turtles were not recorded. These absences are needed for our choice of species distribution model algorithm. “Absences” does not mean that turtle could not be sighted here but that we have no records at these locations, either because we didn’t look or looked and didn’t see them.</p>
<p>These three approaches are as follows:<br>
- Get occurrences for marine species from OBIS using the <code>robis</code> package, and use their locations as the locations for absences. - Select random locations using gridded environmental data as a base for our sampling.<br>
- Select random locations using a polygon drawn around our presence locations.<br>
In both cases, points will be constrained to fit within our area of interest.</p>
<section id="loading-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries">Loading libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Deal with spatial data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Base maps and plotting spatial data</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Data visualisation and manipulation</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Find files easily</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Access to OBIS</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(robis)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">#SDM</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sdmpredictors)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dismo)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggspatial)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="set-up" class="level2">
<h2 class="anchored" data-anchor-id="set-up">Set-up</h2>
<section id="setting-base-directories" class="level3">
<h3 class="anchored" data-anchor-id="setting-base-directories">Setting base directories</h3>
<p>These directories contain the biological data (i.e., presence locations of loggerhead sea turtles) and environmental data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting directories containing input data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dir_data <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">here</span>(), <span class="st">"data/raw-bio"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>dir_env <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">here</span>(), <span class="st">"data/env"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="loading-bounding-box-for-region-of-interest" class="level3">
<h3 class="anchored" data-anchor-id="loading-bounding-box-for-region-of-interest">Loading bounding box for region of interest</h3>
<p>In the <code>01_Presence_Data</code> notebook, we created a bounding box for our region of interest. We will load this bounding box here to spatially constrain our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Loading bounding box for the area of interest</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>extent_polygon <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"../data/BoundingBox.shp"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract polygon geometry </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>pol_geometry <span class="ot">&lt;-</span> <span class="fu">st_as_text</span>(extent_polygon<span class="sc">$</span>geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotting-region-of-interest" class="level3">
<h3 class="anchored" data-anchor-id="plotting-region-of-interest">Plotting region of interest</h3>
<p>This allows us to check our polygon of interest is located in the correct region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting base map</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Plotting map</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Adding base map</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> world) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Adding bounding box</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> extent_polygon, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">fill =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Setting theme of plots to not include a grey background</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="02_Background_Data_files/figure-html/map_aoi-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Our bounding box is definitely in the region we are interested in. We will use this bounding box to filter out presence data from OBIS.</p>
</section>
</section>
<section id="approach-1-use-other-species" class="level2">
<h2 class="anchored" data-anchor-id="approach-1-use-other-species">Approach 1: Use other species</h2>
<p>In this approach we use other marine species presence locations as our locations for our background samples.</p>
<section id="getting-occurrence-data-from-obis" class="level3">
<h3 class="anchored" data-anchor-id="getting-occurrence-data-from-obis">Getting occurrence data from OBIS</h3>
<p>We will use <code>robis</code> to get observations for marine species from OBIS within our bounding box. OBIS data includes about 100 different columns, but not all of these columns are relevant to us. We will define the columns that we need and then we will perform a search of the OBIS database.</p>
</section>
<section id="defining-relevant-columns" class="level3">
<h3 class="anchored" data-anchor-id="defining-relevant-columns">Defining relevant columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>cols.to.use <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"scientificName"</span>, <span class="st">"dateIdentified"</span>, <span class="st">"eventDate"</span>, <span class="st">"decimalLatitude"</span>, <span class="st">"decimalLongitude"</span>, <span class="st">"coordinateUncertaintyInMeters"</span>, <span class="st">"bathymetry"</span>,  <span class="st">"shoredistance"</span>, <span class="st">"sst"</span>, <span class="st">"sss"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="querying-obis" class="level3">
<h3 class="anchored" data-anchor-id="querying-obis">Querying OBIS</h3>
<p>By setting the <code>wrims</code> parameter to <code>TRUE</code> we include observations of species registerd in the <a href="https://www.marinespecies.org/introduced/index.php">World Register of Introduced Marine Species (WRiMS)</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Applying bounding box and including WRiMS species</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>background <span class="ot">&lt;-</span> <span class="fu">occurrence</span>(<span class="at">geometry =</span> pol_geometry, <span class="at">wrims =</span> <span class="cn">TRUE</span>, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                         <span class="co">#DNA data is not needed, subsetting columns of interest</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">dna =</span> <span class="cn">FALSE</span>, <span class="at">fields =</span> cols.to.use,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                         <span class="co">#Excluding records labelled as being on land</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">exclude =</span> <span class="st">"ON_LAND"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Retrieved 5000 records of approximately 20428 (24%)
Retrieved 10000 records of
approximately 20428 (48%)
Retrieved 15000 records of approximately 20428
(73%)
Retrieved 20000 records of approximately 20428 (97%)
Retrieved 20428
records of approximately 20428 (100%)</code></pre>
</div>
</div>
</section>
<section id="saving-background-data" class="level3">
<h3 class="anchored" data-anchor-id="saving-background-data">Saving background data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting full file path to save background information</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>file_path_out <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dir_data, <span class="st">"io-background.csv"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving background data as csv</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(background, file_path_out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="optional-load-background-data" class="level3">
<h3 class="anchored" data-anchor-id="optional-load-background-data">(Optional) Load background data</h3>
<p>If you have previously downloaded the background data, you can simply load the data to the environment instead of downloading it again. To do this, you can use the code below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Find background file in our biological data folder</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>file_path_bg <span class="ot">&lt;-</span> <span class="fu">list.files</span>(dir_data, <span class="at">pattern =</span> <span class="st">"background"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Load file</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>background_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file_path_bg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotting-background-data" class="level3">
<h3 class="anchored" data-anchor-id="plotting-background-data">Plotting background data</h3>
<p>We will create a map with all the observations we obtained from OBIS within our region of interest.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Extracting labels for countries in base map</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>world_points <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_make_valid</span>(world) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Getting centroids for all polygons in the world base map</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_centroid</span>(geometry) <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Getting coordinates for each centroid</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_coordinates</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Adding centroids to original base map</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(world)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in st_centroid.sf(., geometry): st_centroid assumes attributes are
constant over geometries of x</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Saving map into variable</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add world base map and change land colour</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> world, <span class="at">fill =</span> <span class="st">"antiquewhite"</span>)<span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add background points</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> background, </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>             <span class="co">#Point to coordinates for background points</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> decimalLongitude, <span class="at">y =</span> decimalLatitude), </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>             <span class="co">#Changing color and size of points for background data</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="fl">0.1</span>)<span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Decrease map limits to focus on area of interest</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="fu">st_bbox</span>(extent_polygon)<span class="sc">$</span>xmin, <span class="fu">st_bbox</span>(extent_polygon)<span class="sc">$</span>xmax),</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="fu">c</span>(<span class="fu">st_bbox</span>(extent_polygon)<span class="sc">$</span>ymin, <span class="fu">st_bbox</span>(extent_polygon)<span class="sc">$</span>ymax))<span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add scale bar on the top right of the plot</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_scale</span>(<span class="at">location =</span> <span class="st">"tr"</span>, <span class="at">width_hint =</span> <span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add north arrow on the top left of plot</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotation_north_arrow</span>(<span class="at">location =</span> <span class="st">"tl"</span>, <span class="at">which_north =</span> <span class="st">"true"</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                         <span class="co">#Include small buffer from plot edge</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                         <span class="at">pad_x =</span> <span class="fu">unit</span>(<span class="fl">0.01</span>, <span class="st">"in"</span>), <span class="at">pad_y =</span> <span class="fu">unit</span>(<span class="fl">0.05</span>, <span class="st">"in"</span>),</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>                         <span class="co">#Set style of north arrow</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>                         <span class="at">style =</span> north_arrow_fancy_orienteering) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Changing color, type and size of grid lines</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="fu">gray</span>(.<span class="dv">5</span>), <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">size =</span> <span class="fl">0.5</span>), </span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">#Change background of map</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"aliceblue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.
ℹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Do not use spherical geometry</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sf_use_s2</span>(<span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Spherical geometry (s2) switched off</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Adding labels to map</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>plt <span class="ot">&lt;-</span> plt<span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> world_points, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Point to coordinates and column with country names</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y, <span class="at">label =</span> name),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Changing color and size of labels</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"darkblue"</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Avoid label overlap</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">check_overlap =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Change axes labels</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"longitude"</span>, <span class="at">y =</span> <span class="st">"latitude"</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Checking final map</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale on map varies by more than 10%, scale bar may be inaccurate</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 231 rows containing missing values (`geom_text()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="02_Background_Data_files/figure-html/plot_bg1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>As you can see from the map above, this approach is not truly random. This is why we are including a second method to create background samples.</p>
</section>
</section>
<section id="approach-2.-random-points-in-our-region" class="level2">
<h2 class="anchored" data-anchor-id="approach-2.-random-points-in-our-region">Approach 2. Random points in our region</h2>
<p>This section has been adapted from <a href="https://bbest.github.io/eds232-ml/lab1a_sdm-explore.html">this online tutorial</a>.</p>
<section id="loading-raster-layer-for-area-of-interest" class="level3">
<h3 class="anchored" data-anchor-id="loading-raster-layer-for-area-of-interest">Loading raster layer for area of interest</h3>
<p>We need to load a raster layer so we can have a sample grid from where we can generate random points for our background samples.</p>
<p>Environmental data is downloaded using the <code>sdmpredictors</code> library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Set default directory for environmental data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">sdmpredictors_datadir =</span> dir_env)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Getting datasets available through sdmpredictors</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">list_datasets</span>(<span class="at">terrestrial =</span> <span class="cn">FALSE</span>, <span class="at">marine =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  dataset_code terrestrial marine                     url
2   Bio-ORACLE       FALSE   TRUE https://bio-oracle.org/
3      MARSPEC       FALSE   TRUE     http://marspec.org/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               description
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Bio-ORACLE is a set of GIS rasters providing geophysical, biotic and environmental data for surface and benthic marine realms at a spatial resolution 5 arcmin (9.2 km) in the ESRI ascii and tif format.
3 MARSPEC is a set of high resolution climatic and geophysical GIS data layers for the world ocean. Seven geophysical variables were derived from the SRTM30_PLUS high resolution bathymetry dataset.  These layers characterize the horizontal orientation (aspect), slope, and curvature of the seafloor and the distance from shore.  Ten "bioclimatic" variables were derived from NOAA's World Ocean Atlas and NASA's MODIS satellite imagery and characterize the inter-annual means, extremes, and variances in sea surface temperature and salinity. These variables will be useful to those interested in the spatial ecology of marine shallow-water and surface-associated pelagic organisms across the globe. Note that, in contrary to the original MARSPEC, all layers have unscaled values.
                                                                                                                                                                                                                                  citation
2 Tyberghein L., Verbruggen H., Pauly K., Troupin C., Mineur F. &amp; De Clerck O. Bio-ORACLE: a global environmental dataset for marine species distribution modeling. Global Ecology and Biogeography. doi: 10.1111/j.1466-8238.2011.00656.x
3                                                                                                      Sbrocco, EJ and Barber, PH (2013) MARSPEC: Ocean climate layers for marine spatial ecology. Ecology 94: 979. doi: 10.1890/12-1358.1</code></pre>
</div>
</div>
<p>We will use the <code>MARSPEC</code> dataset to get some environmental data. We will now check what layers are available there.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list_layers</span>(<span class="st">"MARSPEC"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    dataset_code                       layer_code
69       MARSPEC                      MS_bathy_5m
70       MARSPEC         MS_biogeo01_aspect_EW_5m
71       MARSPEC         MS_biogeo02_aspect_NS_5m
72       MARSPEC    MS_biogeo03_plan_curvature_5m
73       MARSPEC MS_biogeo04_profile_curvature_5m
75       MARSPEC        MS_biogeo05_dist_shore_5m
76       MARSPEC       MS_biogeo06_bathy_slope_5m
77       MARSPEC         MS_biogeo07_concavity_5m
78       MARSPEC          MS_biogeo08_sss_mean_5m
79       MARSPEC           MS_biogeo09_sss_min_5m
80       MARSPEC           MS_biogeo10_sss_max_5m
81       MARSPEC         MS_biogeo11_sss_range_5m
82       MARSPEC      MS_biogeo12_sss_variance_5m
83       MARSPEC          MS_biogeo13_sst_mean_5m
84       MARSPEC           MS_biogeo14_sst_min_5m
85       MARSPEC           MS_biogeo15_sst_max_5m
86       MARSPEC         MS_biogeo16_sst_range_5m
87       MARSPEC      MS_biogeo17_sst_variance_5m
88       MARSPEC                      MS_sss01_5m
89       MARSPEC                      MS_sss02_5m
90       MARSPEC                      MS_sss03_5m
91       MARSPEC                      MS_sss04_5m
92       MARSPEC                      MS_sss05_5m
93       MARSPEC                      MS_sss06_5m
94       MARSPEC                      MS_sss07_5m
95       MARSPEC                      MS_sss08_5m
96       MARSPEC                      MS_sss09_5m
97       MARSPEC                      MS_sss10_5m
98       MARSPEC                      MS_sss11_5m
99       MARSPEC                      MS_sss12_5m
100      MARSPEC                      MS_sst01_5m
101      MARSPEC                      MS_sst02_5m
102      MARSPEC                      MS_sst03_5m
103      MARSPEC                      MS_sst04_5m
104      MARSPEC                      MS_sst05_5m
105      MARSPEC                      MS_sst06_5m
106      MARSPEC                      MS_sst07_5m
107      MARSPEC                      MS_sst08_5m
108      MARSPEC                      MS_sst09_5m
109      MARSPEC                      MS_sst10_5m
110      MARSPEC                      MS_sst11_5m
111      MARSPEC                      MS_sst12_5m
                                                name
69                                        Bathymetry
70                                  East/West aspect
71                                North/South Aspect
72                                    Plan curvature
73                                 Profile curvature
75                                 Distance to shore
76                                 Bathymetric slope
77                                         Concavity
78                Sea surface salinity (annual mean)
79            Sea surface salinity (monthly minimum)
80            Sea surface salinity (monthly maximum)
81               Sea surface salinity (annual range)
82            Sea surface salinity (annual variance)
83             Sea surface temperature (annual mean)
84  Sea surface temperature (coldest ice-free month)
85  Sea surface temperature (warmest ice-free month)
86                   Sea surface temperature (range)
87                Sea surface temperature (variance)
88                    Sea surface salinity (january)
89                   Sea surface salinity (february)
90                      Sea surface salinity (march)
91                      Sea surface salinity (april)
92                        Sea surface salinity (may)
93                       Sea surface salinity (june)
94                       Sea surface salinity (july)
95                     Sea surface salinity (august)
96                  Sea surface salinity (september)
97                    Sea surface salinity (october)
98                   Sea surface salinity (november)
99                   Sea surface salinity (december)
100                Sea surface temperature (january)
101               Sea surface temperature (february)
102                  Sea surface temperature (march)
103                  Sea surface temperature (april)
104                    Sea surface temperature (may)
105                   Sea surface temperature (june)
106                   Sea surface temperature (july)
107                 Sea surface temperature (august)
108              Sea surface temperature (september)
109                Sea surface temperature (october)
110               Sea surface temperature (november)
111               Sea surface temperature (december)
                                                                                                                                                                                                                                                                             description
69                                                                                                                                                                                                                                                                 Depth of the seafloor
70                                                                                                                                                                                                                                             East/West Aspect (sin(aspect in radians))
71                                                                                                                                                                                                                                           North/South Aspect (cos(aspect in radians))
72                                                                                        Plan curvature is the curvature in the direction perpendicular to the maximum slope and indicates whether flow across a surface would diverge (positive values) or converge (negative values).
73                                                                                     Profile curvature is the curvature in the direction parallel to the maximum slope and indicates whether flow across a surface would accelerate (positive values) or decelerate (negative values).
75                                                                                                                                                                                                                                                                                    ''
76                                                                                                                                                                                 Bathymetric slope was measured in degrees ranging from 0??? (flat surface) to 90??? (vertical slope).
77                                                                                          Concavity is the second derivative of the bathymetry layer (or the slope of the slope) and represents whether a raster cell is on a hill (negative values) or in a valley (positive values).
78                                                                                                              Measurements of sea surface salinity (SSS) were obtained from in situ oceanographic observations compiled by NOAA?s World Ocean Atlas 2009 (WOA09, Antonov et al. 2010).
79                                                                                                              Measurements of sea surface salinity (SSS) were obtained from in situ oceanographic observations compiled by NOAA?s World Ocean Atlas 2009 (WOA09, Antonov et al. 2010).
80                                                                                                              Measurements of sea surface salinity (SSS) were obtained from in situ oceanographic observations compiled by NOAA?s World Ocean Atlas 2009 (WOA09, Antonov et al. 2010).
81                                                                                                              Measurements of sea surface salinity (SSS) were obtained from in situ oceanographic observations compiled by NOAA?s World Ocean Atlas 2009 (WOA09, Antonov et al. 2010).
82                                                                                                              Measurements of sea surface salinity (SSS) were obtained from in situ oceanographic observations compiled by NOAA?s World Ocean Atlas 2009 (WOA09, Antonov et al. 2010).
83  Satellite measures of sea surface temperature (SST) were obtained at a 2.5 arc-minute resolution (approximately 4 km_) from Aqua-MODIS 4-micron nighttime SST Level 3 standard mapped image products, downloaded from NASA's Ocean Color website (http://oceancolor.gsfc.nasa.gov/).
84  Satellite measures of sea surface temperature (SST) were obtained at a 2.5 arc-minute resolution (approximately 4 km_) from Aqua-MODIS 4-micron nighttime SST Level 3 standard mapped image products, downloaded from NASA's Ocean Color website (http://oceancolor.gsfc.nasa.gov/).
85  Satellite measures of sea surface temperature (SST) were obtained at a 2.5 arc-minute resolution (approximately 4 km_) from Aqua-MODIS 4-micron nighttime SST Level 3 standard mapped image products, downloaded from NASA's Ocean Color website (http://oceancolor.gsfc.nasa.gov/).
86  Satellite measures of sea surface temperature (SST) were obtained at a 2.5 arc-minute resolution (approximately 4 km_) from Aqua-MODIS 4-micron nighttime SST Level 3 standard mapped image products, downloaded from NASA's Ocean Color website (http://oceancolor.gsfc.nasa.gov/).
87  Satellite measures of sea surface temperature (SST) were obtained at a 2.5 arc-minute resolution (approximately 4 km_) from Aqua-MODIS 4-micron nighttime SST Level 3 standard mapped image products, downloaded from NASA's Ocean Color website (http://oceancolor.gsfc.nasa.gov/).
88                                                                                                                                                                                                                                   Average sea surface salinity for the month january.
89                                                                                                                                                                                                                                  Average sea surface salinity for the month february.
90                                                                                                                                                                                                                                      Average sea surface salinity for the month march
91                                                                                                                                                                                                                                     Average sea surface salinity for the month april.
92                                                                                                                                                                                                                                       Average sea surface salinity for the month may.
93                                                                                                                                                                                                                                      Average sea surface salinity for the month june.
94                                                                                                                                                                                                                                      Average sea surface salinity for the month july.
95                                                                                                                                                                                                                                    Average sea surface salinity for the month august.
96                                                                                                                                                                                                                                 Average sea surface salinity for the month september.
97                                                                                                                                                                                                                                   Average sea surface salinity for the month october.
98                                                                                                                                                                                                                                  Average sea surface salinity for the month november.
99                                                                                                                                                                                                                                  Average sea surface salinity for the month december.
100                                                                                                                                                                                                                               Average sea surface temperature for the month january.
101                                                                                                                                                                                                                              Average sea surface temperature for the month february.
102                                                                                                                                                                                                                                  Average sea surface temperature for the month march
103                                                                                                                                                                                                                                 Average sea surface temperature for the month april.
104                                                                                                                                                                                                                                   Average sea surface temperature for the month may.
105                                                                                                                                                                                                                                  Average sea surface temperature for the month june.
106                                                                                                                                                                                                                                  Average sea surface temperature for the month july.
107                                                                                                                                                                                                                                Average sea surface temperature for the month august.
108                                                                                                                                                                                                                             Average sea surface temperature for the month september.
109                                                                                                                                                                                                                               Average sea surface temperature for the month october.
110                                                                                                                                                                                                                              Average sea surface temperature for the month november.
111                                                                                                                                                                                                                              Average sea surface temperature for the month december.
    terrestrial marine freshwater cellsize_equalarea cellsize_lonlat      units
69        FALSE   TRUE      FALSE               7000      0.08333333     meters
70        FALSE   TRUE      FALSE               7000      0.08333333    radians
71        FALSE   TRUE      FALSE               7000      0.08333333    radians
72        FALSE   TRUE      FALSE               7000      0.08333333   unitless
73        FALSE   TRUE      FALSE               7000      0.08333333   unitless
75        FALSE   TRUE      FALSE               7000      0.08333333 kilometers
76        FALSE   TRUE      FALSE               7000      0.08333333    degrees
77        FALSE   TRUE      FALSE               7000      0.08333333    degrees
78        FALSE   TRUE      FALSE               7000      0.08333333        psu
79        FALSE   TRUE      FALSE               7000      0.08333333        psu
80        FALSE   TRUE      FALSE               7000      0.08333333        psu
81        FALSE   TRUE      FALSE               7000      0.08333333        psu
82        FALSE   TRUE      FALSE               7000      0.08333333        psu
83        FALSE   TRUE      FALSE               7000      0.08333333    Celsius
84        FALSE   TRUE      FALSE               7000      0.08333333    Celsius
85        FALSE   TRUE      FALSE               7000      0.08333333    Celsius
86        FALSE   TRUE      FALSE               7000      0.08333333    Celsius
87        FALSE   TRUE      FALSE               7000      0.08333333    Celsius
88        FALSE   TRUE      FALSE               7000      0.08333333        psu
89        FALSE   TRUE      FALSE               7000      0.08333333        psu
90        FALSE   TRUE      FALSE               7000      0.08333333        psu
91        FALSE   TRUE      FALSE               7000      0.08333333        psu
92        FALSE   TRUE      FALSE               7000      0.08333333        psu
93        FALSE   TRUE      FALSE               7000      0.08333333        psu
94        FALSE   TRUE      FALSE               7000      0.08333333        psu
95        FALSE   TRUE      FALSE               7000      0.08333333        psu
96        FALSE   TRUE      FALSE               7000      0.08333333        psu
97        FALSE   TRUE      FALSE               7000      0.08333333        psu
98        FALSE   TRUE      FALSE               7000      0.08333333        psu
99        FALSE   TRUE      FALSE               7000      0.08333333        psu
100       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
101       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
102       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
103       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
104       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
105       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
106       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
107       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
108       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
109       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
110       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
111       FALSE   TRUE      FALSE               7000      0.08333333    Celsius
                                     primary_type primary_spatial_resolution
69                               Satellite (SRTM)               30 arcsecond
70                               Satellite (SRTM)               30 arcsecond
71                               Satellite (SRTM)               30 arcsecond
72                               Satellite (SRTM)               30 arcsecond
73                               Satellite (SRTM)               30 arcsecond
75                                             ''                         ''
76                               Satellite (SRTM)               30 arcsecond
77                               Satellite (SRTM)               30 arcsecond
78    in situ measurements, monthly climatologies                1 arcdegree
79    in situ measurements, monthly climatologies                1 arcdegree
80    in situ measurements, monthly climatologies                1 arcdegree
81    in situ measurements, monthly climatologies                1 arcdegree
82    in situ measurements, monthly climatologies                1 arcdegree
83  Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
84  Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
85  Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
86  Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
87  Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
88    in situ measurements, monthly climatologies                1 arcdegree
89    in situ measurements, monthly climatologies                1 arcdegree
90    in situ measurements, monthly climatologies                1 arcdegree
91    in situ measurements, monthly climatologies                1 arcdegree
92    in situ measurements, monthly climatologies                1 arcdegree
93    in situ measurements, monthly climatologies                1 arcdegree
94    in situ measurements, monthly climatologies                1 arcdegree
95    in situ measurements, monthly climatologies                1 arcdegree
96    in situ measurements, monthly climatologies                1 arcdegree
97    in situ measurements, monthly climatologies                1 arcdegree
98    in situ measurements, monthly climatologies                1 arcdegree
99    in situ measurements, monthly climatologies                1 arcdegree
100 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
101 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
102 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
103 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
104 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
105 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
106 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
107 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
108 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
109 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
110 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
111 Satellite (Aqua-MODIS), monthly climatologies              2.5 arcminute
                                                                                         primary_source
69  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
70  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
71  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
72  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
73  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
75    GSHHS v2.1 reference:Wessel and Smith 1996 URL:http://www.ngdc.noaa.gov/mgg/shorelines/gshhs.html
76  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
77  SRTM30_PLUS V6.0 reference: Becker et al. 2009 URL: http://topex.ucsd.edu/WWW_html/srtm30_plus.html
78                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
79                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
80                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
81                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
82                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
83                            Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
84                            Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
85                            Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
86                            Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
87                            Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
88                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
89                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
90                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
91                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
92                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
93                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
94                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
95                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
96                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
97                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
98                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
99                                                 World Ocean Atlas 2009 reference:Antonov et al. 2010
100                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
101                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
102                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
103                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
104                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
105                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
106                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
107                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
108                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
109                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
110                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
111                           Reference: (Feldman &amp; McClain 2010) URL: http://oceancolor.gsfc.nasa.gov/
    start_year start_month start_day end_year end_month end_day
69        2009           1         1     2009        12      31
70        2009           1         1     2009        12      31
71        2009           1         1     2009        12      31
72        2009           1         1     2009        12      31
73        2009           1         1     2009        12      31
75        2009           1         1     2009        12      31
76        2009           1         1     2009        12      31
77        2009           1         1     2009        12      31
78        1955           1         1     2006        12      31
79        1955           1         1     2006        12      31
80        1955           1         1     2006        12      31
81        1955           1         1     2006        12      31
82        1955           1         1     2006        12      31
83        2002           1         1     2010        12      31
84        2002           1         1     2010        12      31
85        2002           1         1     2010        12      31
86        2002           1         1     2010        12      31
87        2002           1         1     2010        12      31
88        1955           1         1     2006        12      31
89        1955           1         1     2006        12      31
90        1955           1         1     2006        12      31
91        1955           1         1     2006        12      31
92        1955           1         1     2006        12      31
93        1955           1         1     2006        12      31
94        1955           1         1     2006        12      31
95        1955           1         1     2006        12      31
96        1955           1         1     2006        12      31
97        1955           1         1     2006        12      31
98        1955           1         1     2006        12      31
99        1955           1         1     2006        12      31
100       2002           1         1     2010        12      31
101       2002           1         1     2010        12      31
102       2002           1         1     2010        12      31
103       2002           1         1     2010        12      31
104       2002           1         1     2010        12      31
105       2002           1         1     2010        12      31
106       2002           1         1     2010        12      31
107       2002           1         1     2010        12      31
108       2002           1         1     2010        12      31
109       2002           1         1     2010        12      31
110       2002           1         1     2010        12      31
111       2002           1         1     2010        12      31
                                          derivation month is_surface version
69                                                ''    NA       TRUE      10
70  derived from bathymetry (sin(aspect in radians))    NA       TRUE      10
71  derived from bathymetry (cos(aspect in radians))    NA       TRUE      10
72                            derived from bathmetry    NA       TRUE      10
73                            derived from bathmetry    NA       TRUE      10
75                      derived from GSHHS Coastline    NA       TRUE      10
76                            derived from bathmetry    NA       TRUE      10
77                            derived from bathmetry    NA       TRUE      10
78                        mean, spline interpolation    NA       TRUE      10
79                     minimum, spline interpolation    NA       TRUE      10
80                     maximum, spline interpolation    NA       TRUE      10
81                       range, spline interpolation    NA       TRUE      10
82                    variance, spline interpolation    NA       TRUE      10
83                                              mean    NA       TRUE      10
84                                           minimum    NA       TRUE      10
85                                           maximum    NA       TRUE      10
86                                             range    NA       TRUE      10
87                                          variance    NA       TRUE      10
88                                              mean     1       TRUE      10
89                                              mean     2       TRUE      10
90                                              mean     3       TRUE      10
91                                              mean     4       TRUE      10
92                                              mean     5       TRUE      10
93                                              mean     6       TRUE      10
94                                              mean     7       TRUE      10
95                                              mean     8       TRUE      10
96                                              mean     9       TRUE      10
97                                              mean    10       TRUE      10
98                                              mean    11       TRUE      10
99                                              mean    12       TRUE      10
100                                             mean     1       TRUE      10
101                                             mean     2       TRUE      10
102                                             mean     3       TRUE      10
103                                             mean     4       TRUE      10
104                                             mean     5       TRUE      10
105                                             mean     6       TRUE      10
106                                             mean     7       TRUE      10
107                                             mean     8       TRUE      10
108                                             mean     9       TRUE      10
109                                             mean    10       TRUE      10
110                                             mean    11       TRUE      10
111                                             mean    12       TRUE      10
                                                                             layer_url
69                       https://www.lifewatch.be/sdmpredictors/MS_bathy_5m_lonlat.tif
70          https://www.lifewatch.be/sdmpredictors/MS_biogeo01_aspect_EW_5m_lonlat.tif
71          https://www.lifewatch.be/sdmpredictors/MS_biogeo02_aspect_NS_5m_lonlat.tif
72     https://www.lifewatch.be/sdmpredictors/MS_biogeo03_plan_curvature_5m_lonlat.tif
73  https://www.lifewatch.be/sdmpredictors/MS_biogeo04_profile_curvature_5m_lonlat.tif
75         https://www.lifewatch.be/sdmpredictors/MS_biogeo05_dist_shore_5m_lonlat.tif
76        https://www.lifewatch.be/sdmpredictors/MS_biogeo06_bathy_slope_5m_lonlat.tif
77          https://www.lifewatch.be/sdmpredictors/MS_biogeo07_concavity_5m_lonlat.tif
78           https://www.lifewatch.be/sdmpredictors/MS_biogeo08_sss_mean_5m_lonlat.tif
79            https://www.lifewatch.be/sdmpredictors/MS_biogeo09_sss_min_5m_lonlat.tif
80            https://www.lifewatch.be/sdmpredictors/MS_biogeo10_sss_max_5m_lonlat.tif
81          https://www.lifewatch.be/sdmpredictors/MS_biogeo11_sss_range_5m_lonlat.tif
82       https://www.lifewatch.be/sdmpredictors/MS_biogeo12_sss_variance_5m_lonlat.tif
83           https://www.lifewatch.be/sdmpredictors/MS_biogeo13_sst_mean_5m_lonlat.tif
84            https://www.lifewatch.be/sdmpredictors/MS_biogeo14_sst_min_5m_lonlat.tif
85            https://www.lifewatch.be/sdmpredictors/MS_biogeo15_sst_max_5m_lonlat.tif
86          https://www.lifewatch.be/sdmpredictors/MS_biogeo16_sst_range_5m_lonlat.tif
87       https://www.lifewatch.be/sdmpredictors/MS_biogeo17_sst_variance_5m_lonlat.tif
88                       https://www.lifewatch.be/sdmpredictors/MS_sss01_5m_lonlat.tif
89                       https://www.lifewatch.be/sdmpredictors/MS_sss02_5m_lonlat.tif
90                       https://www.lifewatch.be/sdmpredictors/MS_sss03_5m_lonlat.tif
91                       https://www.lifewatch.be/sdmpredictors/MS_sss04_5m_lonlat.tif
92                       https://www.lifewatch.be/sdmpredictors/MS_sss05_5m_lonlat.tif
93                       https://www.lifewatch.be/sdmpredictors/MS_sss06_5m_lonlat.tif
94                       https://www.lifewatch.be/sdmpredictors/MS_sss07_5m_lonlat.tif
95                       https://www.lifewatch.be/sdmpredictors/MS_sss08_5m_lonlat.tif
96                       https://www.lifewatch.be/sdmpredictors/MS_sss09_5m_lonlat.tif
97                       https://www.lifewatch.be/sdmpredictors/MS_sss10_5m_lonlat.tif
98                       https://www.lifewatch.be/sdmpredictors/MS_sss11_5m_lonlat.tif
99                       https://www.lifewatch.be/sdmpredictors/MS_sss12_5m_lonlat.tif
100                      https://www.lifewatch.be/sdmpredictors/MS_sst01_5m_lonlat.tif
101                      https://www.lifewatch.be/sdmpredictors/MS_sst02_5m_lonlat.tif
102                      https://www.lifewatch.be/sdmpredictors/MS_sst03_5m_lonlat.tif
103                      https://www.lifewatch.be/sdmpredictors/MS_sst04_5m_lonlat.tif
104                      https://www.lifewatch.be/sdmpredictors/MS_sst05_5m_lonlat.tif
105                      https://www.lifewatch.be/sdmpredictors/MS_sst06_5m_lonlat.tif
106                      https://www.lifewatch.be/sdmpredictors/MS_sst07_5m_lonlat.tif
107                      https://www.lifewatch.be/sdmpredictors/MS_sst08_5m_lonlat.tif
108                      https://www.lifewatch.be/sdmpredictors/MS_sst09_5m_lonlat.tif
109                      https://www.lifewatch.be/sdmpredictors/MS_sst10_5m_lonlat.tif
110                      https://www.lifewatch.be/sdmpredictors/MS_sst11_5m_lonlat.tif
111                      https://www.lifewatch.be/sdmpredictors/MS_sst12_5m_lonlat.tif</code></pre>
</div>
</div>
<p>We will use bathymetry data, so the <code>MS_bathy_5m</code> layer suits our needs. We can use any layer that will not have NAs. We will load this data and crop it using our bounding box.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Loading bathymetry</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>env_stack <span class="ot">&lt;-</span> <span class="fu">load_layers</span>(<span class="st">"MS_bathy_5m"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Cropping to our area of interest</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crop</span>(extent_polygon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can plot the cropped bathymetry to ensure it matches our study region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(env_stack)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="02_Background_Data_files/figure-html/plot_bathy-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see the outline of African and Asian continents, which matches our area of interest. Now we can continue with creating our background points.</p>
</section>
<section id="sample-points-from-bathymetry-layer" class="level3">
<h3 class="anchored" data-anchor-id="sample-points-from-bathymetry-layer">Sample points from bathymetry layer</h3>
<p>Using the <code>dismo</code> package, we will create random points over the bathymetry layer that we will use as background points. In this example, we have chosen to produce 1000 background points.</p>
<p>It is worth noting that the distribution and number of background points has a strong influence on SDM results. See the <code>README</code> file for resources discussing this issue.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting seed for reproducibility</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting number of background points required</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>nsamp <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Create background points</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>background <span class="ot">&lt;-</span> <span class="fu">randomPoints</span>(env_stack, nsamp) <span class="sc">%&gt;%</span> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Transform to tibble</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Transform to shapefile</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotting-results" class="level3">
<h3 class="anchored" data-anchor-id="plotting-results">Plotting results</h3>
<p>We will plot results to make sure our background points are in the ocean only.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(background, <span class="at">col.regions =</span> <span class="st">"gray"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in cbind(`Feature ID` = fid, mat): number of rows of result is not a
multiple of vector length (arg 1)</code></pre>
</div>
<div class="cell-output-display">

<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3f4b79cb711e7cb62301" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3f4b79cb711e7cb62301">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[11.9583333333333,1.54166666666667,1.45833333333334,0.375000000000004,18.0416666666667,27.2083333333333,19.375,1.79166666666667,18.625,15.125,13.125,24.0416666666667,16.5416666666667,12.875,0.208333333333339,12.7916666666667,17.625,13.0416666666667,15.375,15.375,5.54166666666667,2.20833333333334,2.20833333333334,6.875,1.125,4.29166666666667,23.4583333333333,13.4583333333333,8.04166666666667,14.9583333333333,26.4583333333333,22.875,20.7083333333333,12.875,15.125,7.625,0.958333333333339,2.125,22.2916666666667,10.2083333333333,16.5416666666667,7.54166666666667,22.0416666666667,3.54166666666667,13.0416666666667,11.625,26.625,14.0416666666667,14.5416666666667,1.54166666666667,23.7083333333333,28.7083333333333,10.375,7.70833333333334,13.5416666666667,14.125,5.70833333333334,21.875,8.45833333333334,0.958333333333339,1.70833333333334,10.0416666666667,12.2083333333333,2.04166666666667,6.375,13.875,1.54166666666667,4.70833333333334,7.875,24.2083333333333,16.4583333333333,10.7916666666667,6.625,12.125,4.875,12.7083333333333,3.875,8.375,11.125,27.2916666666667,0.291666666666671,3.70833333333334,3.45833333333334,28.9583333333333,23.7916666666667,2.79166666666667,23.9583333333333,24.625,28.0416666666667,2.95833333333334,22.7083333333333,1.29166666666667,1.54166666666667,20.2083333333333,0.125000000000007,3.29166666666667,10.2916666666667,17.2916666666667,7.875,9.29166666666667,2.95833333333334,2.29166666666667,24.875,11.2916666666667,10.625,12.4583333333333,13.7916666666667,2.54166666666667,6.70833333333334,10.625,4.375,28.0416666666667,4.70833333333334,2.29166666666667,24.2916666666667,3.70833333333334,1.875,11.7916666666667,14.2916666666667,2.95833333333334,5.70833333333334,1.375,17.9583333333333,7.79166666666667,1.45833333333334,16.2083333333333,-0.124999999999993,11.7916666666667,12.4583333333333,1.125,10.0416666666667,6.54166666666667,0.291666666666671,21.9583333333333,2.375,20.625,19.5416666666667,17.7916666666667,4.875,3.29166666666667,24.2083333333333,2.20833333333334,10.2083333333333,28.5416666666667,13.7916666666667,6.70833333333334,15.9583333333333,-0.124999999999993,3.125,13.4583333333333,6.375,1.45833333333334,9.54166666666667,15.625,4.54166666666667,16.4583333333333,10.375,17.375,2.375,21.2083333333333,21.375,9.79166666666667,11.9583333333333,17.7916666666667,9.54166666666667,11.875,12.0416666666667,5.79166666666667,0.125000000000007,3.95833333333334,5.79166666666667,4.45833333333334,24.7916666666667,19.375,14.875,6.54166666666667,14.2083333333333,0.0416666666666714,10.125,11.0416666666667,-0.124999999999993,4.20833333333334,5.04166666666667,30.0416666666667,1.875,0.291666666666671,23.9583333333333,17.7916666666667,11.4583333333333,25.2083333333333,25.2083333333333,7.95833333333334,19.2083333333333,26.2916666666667,8.54166666666667,10.0416666666667,6.29166666666667,5.29166666666667,5.70833333333334,16.7916666666667,10.0416666666667,0.791666666666671,4.45833333333334,16.625,14.875,29.2916666666667,12.2083333333333,8.04166666666667,15.5416666666667,5.625,0.791666666666671,4.125,0.125000000000007,10.9583333333333,8.125,0.625000000000004,14.375,9.625,10.5416666666667,12.7916666666667,25.2083333333333,3.45833333333334,24.2916666666667,12.375,9.125,0.291666666666671,6.79166666666667,10.4583333333333,18.875,11.625,11.2083333333333,25.125,-0.124999999999993,13.9583333333333,10.9583333333333,3.29166666666667,7.29166666666667,0.208333333333339,3.375,26.5416666666667,21.2916666666667,11.9583333333333,13.125,13.5416666666667,1.04166666666667,13.875,8.04166666666667,19.7083333333333,8.79166666666667,8.20833333333334,12.2916666666667,13.9583333333333,25.375,10.625,3.04166666666667,18.4583333333333,20.2083333333333,12.2916666666667,14.7916666666667,17.0416666666667,6.95833333333334,12.7083333333333,25.2916666666667,5.95833333333334,9.70833333333334,6.54166666666667,7.375,5.625,-0.0416666666666643,6.04166666666667,9.70833333333334,6.54166666666667,1.04166666666667,10.5416666666667,11.4583333333333,8.29166666666667,23.625,3.45833333333334,9.625,14.2083333333333,12.0416666666667,3.54166666666667,7.54166666666667,6.95833333333334,12.125,18.7083333333333,6.54166666666667,10.0416666666667,6.29166666666667,1.875,1.70833333333334,19.5416666666667,13.2083333333333,13.125,5.95833333333334,9.375,23.625,0.541666666666671,16.7083333333333,0.375000000000004,9.29166666666667,5.125,13.5416666666667,20.2083333333333,3.375,1.45833333333334,2.375,9.625,3.70833333333334,16.625,11.375,2.70833333333334,1.79166666666667,8.95833333333334,13.0416666666667,5.70833333333334,7.625,3.29166666666667,1.54166666666667,6.125,2.29166666666667,4.375,10.7083333333333,2.29166666666667,27.125,13.625,3.20833333333334,0.375000000000004,3.54166666666667,0.291666666666671,7.20833333333334,18.9583333333333,9.625,14.875,6.79166666666667,2.29166666666667,10.7916666666667,1.625,22.2916666666667,24.125,3.375,25.4583333333333,2.04166666666667,11.125,6.70833333333334,-0.0416666666666643,9.29166666666667,21.2083333333333,29.875,-0.0416666666666643,12.625,6.20833333333334,0.375000000000004,22.375,14.625,1.875,4.45833333333334,23.5416666666667,1.375,11.0416666666667,19.2083333333333,16.2916666666667,5.04166666666667,17.125,16.375,15.9583333333333,7.04166666666667,16.2916666666667,0.791666666666671,2.70833333333334,6.625,3.95833333333334,23.125,11.5416666666667,13.4583333333333,24.4583333333333,4.875,3.29166666666667,15.625,10.9583333333333,7.20833333333334,3.20833333333334,2.20833333333334,7.875,0.541666666666671,14.4583333333333,11.125,17.375,11.875,17.2916666666667,25.0416666666667,13.2083333333333,4.45833333333334,15.7083333333333,22.7916666666667,26.4583333333333,25.2916666666667,1.54166666666667,1.625,8.04166666666667,0.625000000000004,4.29166666666667,23.4583333333333,10.375,1.375,13.7916666666667,19.0416666666667,14.5416666666667,14.125,5.45833333333334,17.5416666666667,25.2083333333333,26.375,8.625,0.0416666666666714,5.125,12.2916666666667,13.875,13.7083333333333,2.29166666666667,3.45833333333334,15.2916666666667,6.875,23.5416666666667,25.9583333333333,13.0416666666667,19.7916666666667,1.29166666666667,29.5416666666667,10.2083333333333,7.04166666666667,1.20833333333334,14.5416666666667,7.875,13.375,12.375,1.95833333333334,16.7083333333333,9.45833333333334,28.2083333333333,8.70833333333334,17.7916666666667,8.375,9.875,5.54166666666667,11.125,25.375,4.875,4.29166666666667,6.20833333333334,1.04166666666667,1.54166666666667,13.2083333333333,4.70833333333334,14.7916666666667,6.125,1.625,0.708333333333339,13.625,15.2083333333333,3.95833333333334,7.45833333333334,6.625,26.2083333333333,9.20833333333334,8.125,14.0416666666667,8.45833333333334,0.625000000000004,24.2083333333333,2.875,10.2083333333333,11.0416666666667,5.79166666666667,17.625,13.7916666666667,10.7916666666667,16.875,21.7916666666667,5.45833333333334,8.70833333333334,9.375,13.2083333333333,3.625,1.70833333333334,14.4583333333333,2.45833333333334,13.7083333333333,1.95833333333334,24.7916666666667,3.125,8.20833333333334,2.95833333333334,11.625,1.95833333333334,7.29166666666667,9.54166666666667,3.375,12.2083333333333,2.04166666666667,24.9583333333333,7.375,26.7083333333333,18.0416666666667,13.375,15.9583333333333,10.4583333333333,0.0416666666666714,5.04166666666667,4.45833333333334,1.875,29.375,25.4583333333333,2.29166666666667,5.125,16.7083333333333,8.29166666666667,6.70833333333334,8.70833333333334,12.625,19.875,6.125,23.9583333333333,13.9583333333333,12.0416666666667,5.29166666666667,16.125,1.95833333333334,2.375,7.95833333333334,27.5416666666667,0.958333333333339,6.95833333333334,13.375,5.79166666666667,0.458333333333339,18.4583333333333,25.375,16.2083333333333,16.125,13.2083333333333,9.95833333333334,10.2916666666667,2.45833333333334,17.5416666666667,22.4583333333333,11.375,16.125,9.45833333333334,29.2916666666667,0.208333333333339,20.375,1.29166666666667,15.5416666666667,6.45833333333334,1.04166666666667,17.125,12.9583333333333,2.70833333333334,7.95833333333334,5.20833333333334,2.70833333333334,12.875,1.375,7.125,13.2083333333333,8.79166666666667,2.70833333333334,19.0416666666667,4.20833333333334,7.625,12.0416666666667,17.875,6.625,11.2083333333333,21.5416666666667,16.4583333333333,19.7083333333333,24.875,6.04166666666667,9.54166666666667,2.625,1.04166666666667,2.95833333333334,17.2916666666667,10.4583333333333,3.95833333333334,26.5416666666667,16.5416666666667,21.7916666666667,6.04166666666667,20.7083333333333,7.125,24.7083333333333,0.708333333333339,14.375,10.7083333333333,2.20833333333334,24.2083333333333,18.375,26.4583333333333,4.625,10.375,15.875,19.2916666666667,14.9583333333333,16.375,27.2083333333333,14.2916666666667,12.7083333333333,18.7083333333333,2.45833333333334,16.7916666666667,16.4583333333333,18.7916666666667,19.4583333333333,2.375,9.45833333333334,6.875,0.541666666666671,1.79166666666667,18.7083333333333,19.2083333333333,15.2083333333333,3.375,3.79166666666667,7.04166666666667,25.625,1.95833333333334,9.70833333333334,0.458333333333339,27.7916666666667,6.125,16.7916666666667,12.9583333333333,17.5416666666667,3.20833333333334,9.04166666666667,14.375,7.54166666666667,9.45833333333334,7.04166666666667,2.95833333333334,16.7916666666667,2.45833333333334,11.7916666666667,17.875,18.375,13.7916666666667,5.875,-0.124999999999993,6.45833333333334,8.875,2.29166666666667,25.0416666666667,0.208333333333339,10.125,11.5416666666667,4.70833333333334,27.875,-0.0416666666666643,14.2083333333333,4.95833333333334,9.125,2.45833333333334,0.375000000000004,18.2916666666667,1.95833333333334,28.875,14.625,18.0416666666667,15.5416666666667,22.2916666666667,24.0416666666667,-0.0416666666666643,18.375,25.4583333333333,23.9583333333333,21.4583333333333,15.5416666666667,11.9583333333333,4.45833333333334,29.0416666666667,8.04166666666667,14.2083333333333,25.7083333333333,24.0416666666667,5.95833333333334,11.875,1.54166666666667,3.20833333333334,1.45833333333334,3.79166666666667,4.79166666666667,12.7083333333333,24.7083333333333,1.54166666666667,15.2083333333333,24.4583333333333,8.54166666666667,12.2916666666667,7.20833333333334,11.125,14.125,14.9583333333333,15.7916666666667,20.2916666666667,17.5416666666667,12.625,7.54166666666667,24.9583333333333,0.625000000000004,1.875,0.458333333333339,26.9583333333333,0.958333333333339,2.70833333333334,8.20833333333334,4.95833333333334,10.2916666666667,4.45833333333334,19.7916666666667,6.20833333333334,24.875,16.2916666666667,5.20833333333334,20.4583333333333,7.54166666666667,18.2083333333333,17.2083333333333,8.29166666666667,19.7916666666667,12.0416666666667,12.7916666666667,30.0416666666667,1.95833333333334,3.04166666666667,24.375,26.125,3.375,8.875,12.7916666666667,18.7083333333333,12.7916666666667,24.625,19.4583333333333,24.7083333333333,10.2916666666667,9.29166666666667,12.125,8.20833333333334,4.54166666666667,11.625,20.375,10.375,1.54166666666667,24.7083333333333,1.625,18.9583333333333,23.0416666666667,2.70833333333334,7.375,27.5416666666667,3.70833333333334,8.70833333333334,19.5416666666667,0.708333333333339,4.875,5.95833333333334,2.45833333333334,23.9583333333333,0.208333333333339,24.875,25.375,10.0416666666667,16.875,8.70833333333334,14.2916666666667,5.95833333333334,0.208333333333339,20.2916666666667,22.875,2.95833333333334,15.7916666666667,8.625,4.04166666666667,19.9583333333333,24.7916666666667,11.7916666666667,25.2083333333333,4.45833333333334,4.79166666666667,1.875,18.7916666666667,28.4583333333333,12.625,11.2916666666667,1.875,2.45833333333334,7.875,2.375,0.875000000000004,23.9583333333333,14.375,2.70833333333334,10.875,15.5416666666667,4.45833333333334,16.375,0.541666666666671,13.375,11.375,9.54166666666667,12.375,17.0416666666667,13.0416666666667,2.375,5.625,1.29166666666667,6.70833333333334,2.375,1.20833333333334,25.2083333333333,6.95833333333334,16.375,11.4583333333333,17.9583333333333,1.625,5.375,9.29166666666667,14.2083333333333,1.29166666666667,6.45833333333334,19.625,27.5416666666667,3.875,6.20833333333334,8.04166666666667,9.375,15.125,5.875,6.95833333333334,5.95833333333334,28.2916666666667,11.7916666666667,11.7083333333333,10.125,11.2916666666667,25.2083333333333,14.0416666666667,15.5416666666667,9.29166666666667,5.20833333333334,8.70833333333334,0.458333333333339,4.04166666666667,0.291666666666671,15.625,1.95833333333334,16.9583333333333,9.29166666666667,16.2083333333333,12.375,2.125,2.45833333333334,14.0416666666667,14.2083333333333,16.7916666666667,11.125,10.7916666666667,13.2083333333333,6.54166666666667,2.29166666666667,21.7083333333333,3.375,-0.124999999999993,7.95833333333334,25.5416666666667,8.45833333333334,26.2083333333333,9.79166666666667,24.375,1.375,12.2916666666667,13.0416666666667,11.7083333333333,11.5416666666667,4.20833333333334,4.20833333333334,1.125,25.0416666666667,16.9583333333333,4.125,18.875,15.2916666666667,17.625,23.375,2.95833333333334,0.875000000000004,5.79166666666667,2.04166666666667,8.79166666666667,20.875,1.95833333333334,11.4583333333333,-0.124999999999993,3.29166666666667,2.95833333333334,0.375000000000004,2.04166666666667,11.125,0.708333333333339,13.2083333333333,12.0416666666667,4.95833333333334,13.7083333333333,9.54166666666667,22.2083333333333,15.0416666666667,-0.124999999999993,17.0416666666667,8.45833333333334,3.29166666666667,9.45833333333334,12.0416666666667,14.7916666666667,16.0416666666667,16.2916666666667,0.291666666666671,18.2916666666667,11.125,22.375,5.70833333333334,5.29166666666667,11.0416666666667,20.0416666666667,11.2083333333333,4.04166666666667,2.20833333333334,10.7916666666667,24.375,13.7083333333333,18.2916666666667,16.625,14.2083333333333,11.7083333333333,21.7916666666667,24.5416666666667,0.125000000000007,12.9583333333333,15.875,16.0416666666667,0.541666666666671,6.20833333333334,16.2916666666667,7.54166666666667,13.125,20.5416666666667,9.29166666666667,14.0416666666667,10.2083333333333,11.125,2.79166666666667,12.125,7.29166666666667,10.875,0.291666666666671,17.2083333333333,12.0416666666667,6.45833333333334,13.5416666666667,4.79166666666667,3.875,25.9583333333333,17.875,-0.0416666666666643,0.791666666666671,2.20833333333334,12.7916666666667,20.9583333333333,6.375,10.375,1.45833333333334,2.375,7.375,14.7083333333333,13.2083333333333,2.20833333333334,0.875000000000004,10.7916666666667,3.79166666666667,24.125,22.9583333333333,11.2916666666667,1.79166666666667,1.29166666666667,8.54166666666667,10.625,21.0416666666667,24.375],[60.625,50.2083333333333,49.9583333333333,53.5416666666667,64.7083333333333,50.9583333333333,63.5416666666667,48.0416666666667,61.0416666666667,62.5416666666667,51.7916666666667,58.7083333333333,53.7083333333333,43.4583333333333,51.625,53.7083333333333,56.4583333333333,52.7916666666667,54.7083333333333,56.9583333333333,51.2916666666667,63.9583333333333,52.2083333333333,52.375,64.0416666666667,60.125,61.625,56.375,63.625,53.625,51.9583333333333,63.0416666666667,62.9583333333333,57.7083333333333,58.875,61.375,55.9583333333333,62.875,64.625,50.875,59.0416666666667,58.5416666666667,60.4583333333333,58.375,60.875,61.625,56.7916666666667,57.875,62.4583333333333,61.875,61.2916666666667,49.9583333333333,58.625,60.375,64.5416666666667,50.5416666666667,53.875,64.0416666666667,59.7916666666667,45.4583333333333,52.9583333333333,59.0416666666667,47.7083333333333,55.125,50.875,51.875,61.9583333333333,50.2916666666667,64.625,63.0416666666667,59.625,55.875,59.0416666666667,44.9583333333333,52.7916666666667,61.0416666666667,61.375,58.0416666666667,56.5416666666667,51.9583333333333,63.9583333333333,55.7083333333333,51.2083333333333,48.7916666666667,62.9583333333333,64.2083333333333,57.4583333333333,52.2083333333333,50.7916666666667,63.625,60.125,47.7083333333333,62.7916666666667,58.625,47.125,60.375,53.875,59.375,58.2916666666667,53.5416666666667,58.125,51.625,56.375,59.7083333333333,61.4583333333333,49.125,51.875,50.2916666666667,64.375,64.625,49.375,48.875,60.2916666666667,50.625,52.875,61.0416666666667,48.9583333333333,55.125,62.7083333333333,50.9583333333333,49.7916666666667,47.5416666666667,61.7083333333333,50.4583333333333,64.875,57.625,58.5416666666667,63.9583333333333,56.875,63.7083333333333,59.2916666666667,61.9583333333333,54.875,61.875,54.625,60.375,57.7083333333333,56.375,59.4583333333333,64.875,58.9583333333333,48.0416666666667,57.9583333333333,49.4583333333333,57.7916666666667,58.0416666666667,58.7083333333333,57.7916666666667,58.0416666666667,50.0416666666667,54.0416666666667,50.4583333333333,57.375,63.7083333333333,59.5416666666667,60.9583333333333,51.7916666666667,41.9583333333333,46.625,60.7083333333333,59.7916666666667,54.7083333333333,55.0416666666667,60.2083333333333,60.875,45.4583333333333,53.9583333333333,63.2916666666667,60.9583333333333,53.125,57.2083333333333,60.875,62.0416666666667,59.4583333333333,57.7916666666667,57.4583333333333,63.2916666666667,65.125,51.2083333333333,44.375,62.9583333333333,64.625,57.625,49.125,52.0416666666667,45.7916666666667,51.9583333333333,63.0416666666667,53.4583333333333,59.7083333333333,53.7083333333333,65.125,65.125,55.0416666666667,58.9583333333333,52.9583333333333,50.625,53.875,48.9583333333333,60.4583333333333,63.625,63.125,53.375,62.0416666666667,57.375,49.9583333333333,65.0416666666667,60.0416666666667,53.2083333333333,48.7083333333333,48.625,64.875,55.4583333333333,57.4583333333333,54.0416666666667,49.2916666666667,49.5416666666667,58.7083333333333,63.375,45.4583333333333,52.9583333333333,61.375,54.0416666666667,62.0416666666667,51.375,63.875,54.9583333333333,44.7916666666667,63.2083333333333,56.2083333333333,63.7916666666667,56.4583333333333,45.2916666666667,63.2083333333333,61.7083333333333,58.875,51.625,57.2083333333333,62.625,53.0416666666667,59.0416666666667,52.625,64.9583333333333,62.375,59.375,54.625,59.7083333333333,63.7916666666667,58.625,55.7916666666667,62.9583333333333,54.4583333333333,51.9583333333333,55.9583333333333,64.625,61.125,58.875,45.7083333333333,53.875,57.7916666666667,53.5416666666667,49.4583333333333,63.875,56.4583333333333,53.9583333333333,61.125,60.625,64.7916666666667,61.4583333333333,51.375,54.125,50.2916666666667,44.625,59.2083333333333,64.2916666666667,61.125,63.7916666666667,59.2083333333333,64.375,49.7083333333333,54.7916666666667,61.7083333333333,59.7083333333333,64.5416666666667,49.375,61.0416666666667,56.2916666666667,62.4583333333333,53.625,46.5416666666667,50.2916666666667,62.875,56.0416666666667,64.7916666666667,52.9583333333333,50.7916666666667,62.875,61.2083333333333,55.7916666666667,61.375,64.0416666666667,60.125,60.2083333333333,63.2083333333333,58.7083333333333,53.9583333333333,50.2083333333333,54.0416666666667,52.7083333333333,60.2083333333333,53.375,47.7083333333333,60.875,62.625,56.625,61.7916666666667,64.2083333333333,48.2083333333333,51.5416666666667,64.9583333333333,52.625,49.125,45.2916666666667,51.2083333333333,49.375,57.2083333333333,49.2916666666667,49.2916666666667,56.2083333333333,46.875,54.875,61.0416666666667,52.9583333333333,53.5416666666667,50.5416666666667,58.125,59.375,52.2083333333333,64.4583333333333,62.7916666666667,56.125,60.625,46.2916666666667,65.0416666666667,56.2916666666667,45.7083333333333,59.7916666666667,63.4583333333333,50.0416666666667,55.4583333333333,43.4583333333333,59.625,51.5416666666667,61.875,54.7916666666667,61.375,63.7916666666667,58.7083333333333,62.875,53.625,59.7916666666667,57.4583333333333,57.2916666666667,60.5416666666667,64.9583333333333,63.5416666666667,56.2083333333333,63.0416666666667,48.2083333333333,48.9583333333333,55.5416666666667,64.4583333333333,62.7083333333333,43.5416666666667,56.7083333333333,51.9583333333333,58.7083333333333,64.2083333333333,59.125,54.4583333333333,52.5416666666667,46.875,56.7916666666667,51.7916666666667,56.7916666666667,64.625,52.875,57.375,61.7916666666667,57.125,60.375,61.2916666666667,59.2916666666667,61.2083333333333,62.5416666666667,55.5416666666667,54.375,49.125,60.375,54.125,49.125,49.2916666666667,64.375,54.625,63.875,64.7916666666667,58.375,58.7083333333333,53.2083333333333,53.2083333333333,41.875,64.4583333333333,56.125,62.375,60.375,62.5416666666667,43.625,50.9583333333333,62.9583333333333,51.5416666666667,59.7083333333333,64.0416666666667,61.375,62.7916666666667,53.125,52.625,61.875,45.2083333333333,48.9583333333333,54.5416666666667,50.375,55.7083333333333,61.5416666666667,56.125,64.375,47.5416666666667,54.0416666666667,63.2916666666667,62.625,50.9583333333333,59.7083333333333,61.2083333333333,58.375,57.625,55.9583333333333,61.2916666666667,60.0416666666667,57.0416666666667,51.4583333333333,61.7916666666667,51.875,61.7916666666667,60.0416666666667,64.2083333333333,58.4583333333333,63.9583333333333,57.125,62.7916666666667,42.9583333333333,62.2083333333333,55.875,55.4583333333333,53.2083333333333,54.7083333333333,50.7083333333333,52.7083333333333,61.7916666666667,60.125,54.875,63.375,54.125,61.375,58.875,57.4583333333333,57.0416666666667,56.4583333333333,61.9583333333333,56.875,59.7083333333333,51.9583333333333,57.7083333333333,52.0416666666667,64.7083333333333,49.2916666666667,44.875,51.2083333333333,62.2916666666667,57.2916666666667,48.4583333333333,51.5416666666667,54.875,52.5416666666667,61.875,47.375,58.2083333333333,52.5416666666667,61.7083333333333,62.2083333333333,49.9583333333333,47.2916666666667,62.7083333333333,62.4583333333333,50.2083333333333,58.2083333333333,62.875,57.5416666666667,54.5416666666667,58.5416666666667,62.0416666666667,54.9583333333333,57.375,47.875,52.7916666666667,53.4583333333333,54.375,53.4583333333333,63.2083333333333,53.7916666666667,56.625,64.875,58.9583333333333,56.5416666666667,63.375,48.4583333333333,44.4583333333333,57.5416666666667,55.375,47.7083333333333,60.2083333333333,53.625,49.2916666666667,63.7916666666667,63.875,46.5416666666667,65.0416666666667,50.625,62.4583333333333,57.375,54.375,53.2916666666667,50.5416666666667,61.7083333333333,55.125,62.375,59.5416666666667,62.625,54.9583333333333,61.4583333333333,59.875,50.2083333333333,64.7916666666667,60.7916666666667,56.625,41.875,50.125,55.7916666666667,65.125,58.875,51.7916666666667,50.2083333333333,58.2083333333333,60.9583333333333,64.2083333333333,49.5416666666667,60.7083333333333,53.7083333333333,52.875,63.7083333333333,58.875,51.7083333333333,55.5416666666667,61.875,62.9583333333333,53.625,57.7916666666667,64.625,54.625,62.125,60.9583333333333,56.625,52.7083333333333,47.2083333333333,61.0416666666667,50.375,59.7083333333333,44.875,61.2916666666667,54.0416666666667,54.5416666666667,62.375,55.125,60.2916666666667,62.875,64.625,59.4583333333333,59.2083333333333,44.4583333333333,61.7916666666667,56.9583333333333,58.7916666666667,51.2083333333333,58.2083333333333,59.5416666666667,59.5416666666667,60.625,51.4583333333333,58.5416666666667,51.375,58.0416666666667,64.625,61.7916666666667,55.9583333333333,63.7916666666667,53.375,58.625,61.0416666666667,58.0416666666667,62.875,57.2916666666667,49.4583333333333,59.4583333333333,64.0416666666667,63.125,57.4583333333333,56.875,50.9583333333333,53.2916666666667,52.375,55.2916666666667,62.7083333333333,45.875,50.2916666666667,64.7083333333333,56.125,62.625,58.625,57.875,53.375,56.7083333333333,62.125,57.875,59.2916666666667,51.5416666666667,55.875,52.0416666666667,65.0416666666667,55.7083333333333,58.7083333333333,61.375,60.7083333333333,59.7083333333333,61.7916666666667,63.375,47.125,53.5416666666667,56.7083333333333,54.5416666666667,56.9583333333333,54.2916666666667,51.125,52.7916666666667,60.0416666666667,49.0416666666667,63.625,48.5416666666667,59.625,61.375,64.2916666666667,49.9583333333333,53.9583333333333,59.0416666666667,60.7916666666667,63.2916666666667,53.7083333333333,47.375,60.2083333333333,54.2916666666667,52.2083333333333,60.375,55.7083333333333,55.5416666666667,56.875,50.2083333333333,50.0416666666667,51.625,53.2083333333333,62.2916666666667,59.7083333333333,58.5416666666667,53.625,47.9583333333333,48.0416666666667,60.625,49.875,49.9583333333333,53.7083333333333,44.625,51.125,53.9583333333333,51.875,44.2916666666667,63.0416666666667,60.2083333333333,52.625,50.5416666666667,60.2083333333333,63.375,59.0416666666667,46.0416666666667,51.2916666666667,52.875,51.4583333333333,51.625,53.625,53.2916666666667,45.9583333333333,46.5416666666667,63.0416666666667,54.7083333333333,63.5416666666667,63.125,57.875,51.2083333333333,50.7083333333333,62.4583333333333,49.7916666666667,60.625,52.7916666666667,59.2916666666667,61.2083333333333,56.5416666666667,63.7083333333333,48.7916666666667,47.375,50.0416666666667,57.2083333333333,49.7083333333333,62.875,55.2083333333333,57.4583333333333,52.375,60.5416666666667,57.7916666666667,44.4583333333333,52.9583333333333,60.0416666666667,53.125,50.9583333333333,55.2083333333333,63.625,59.375,51.5416666666667,50.375,61.7916666666667,44.625,62.7083333333333,64.9583333333333,59.4583333333333,64.0416666666667,63.875,49.375,55.2083333333333,49.625,64.7083333333333,56.2916666666667,58.375,44.375,56.2916666666667,50.2916666666667,56.2916666666667,64.625,62.875,62.125,52.2916666666667,54.875,65.125,53.7916666666667,52.7083333333333,52.0416666666667,55.875,58.125,59.4583333333333,57.0416666666667,58.875,54.4583333333333,64.4583333333333,60.2916666666667,57.2083333333333,58.4583333333333,52.625,57.375,54.9583333333333,45.375,58.875,50.0416666666667,54.2083333333333,51.2083333333333,52.125,62.125,54.0416666666667,60.875,44.7916666666667,62.2916666666667,49.625,50.7916666666667,62.0416666666667,64.125,52.125,52.9583333333333,43.7916666666667,56.2916666666667,59.9583333333333,63.4583333333333,56.4583333333333,56.7083333333333,50.2916666666667,50.4583333333333,55.7916666666667,63.7916666666667,52.5416666666667,60.7083333333333,56.9583333333333,62.9583333333333,54.7916666666667,55.5416666666667,45.0416666666667,56.4583333333333,59.875,53.9583333333333,57.7083333333333,51.7083333333333,62.7916666666667,55.9583333333333,61.7916666666667,50.625,54.2916666666667,63.9583333333333,58.0416666666667,53.5416666666667,52.7083333333333,59.2083333333333,61.2083333333333,49.5416666666667,49.875,61.2916666666667,56.5416666666667,50.875,63.7916666666667,52.2083333333333,48.9583333333333,56.625,54.5416666666667,63.4583333333333,55.375,53.125,54.7916666666667,58.7083333333333,52.2916666666667,63.5416666666667,64.0416666666667,53.7916666666667,53.9583333333333,44.4583333333333,55.7916666666667,48.9583333333333,61.5416666666667,63.4583333333333,56.375,56.625,56.7916666666667,42.7916666666667,51.875,62.2083333333333,64.0416666666667,49.125,54.875,51.2083333333333,51.7083333333333,50.7916666666667,56.7083333333333,57.875,59.4583333333333,55.625,61.7916666666667,61.625,63.875,57.7083333333333,51.0416666666667,52.875,55.4583333333333,62.625,60.125,48.7916666666667,58.2083333333333,59.2083333333333,55.7083333333333,62.125,60.5416666666667,52.7083333333333,49.2916666666667,63.4583333333333,64.0416666666667,61.7916666666667,54.5416666666667,49.4583333333333,51.625,63.125,50.125,64.2916666666667,60.5416666666667,60.2916666666667,63.4583333333333,49.375,55.125,50.7083333333333,65.125,58.7083333333333,61.875,59.375,53.375,59.625,61.625,60.7916666666667,55.7083333333333,53.875,61.2916666666667,55.9583333333333,42.7083333333333,45.5416666666667,58.9583333333333,60.4583333333333,62.2083333333333,61.4583333333333,50.875,65.0416666666667,61.875,52.4583333333333,61.4583333333333,47.7083333333333,53.5416666666667,61.7916666666667,49.2083333333333,62.375,53.625,41.875,61.0416666666667,64.125,60.7083333333333,57.0416666666667,50.7083333333333,54.7083333333333,58.375,43.375,64.5416666666667,61.9583333333333,57.4583333333333,47.7083333333333,62.5416666666667,56.0416666666667,47.875,54.875,64.9583333333333,48.2916666666667,47.875,55.2083333333333,55.625,63.4583333333333,56.125,48.5416666666667,54.2083333333333,51.7916666666667,53.5416666666667,54.5416666666667,52.9583333333333,59.4583333333333,51.4583333333333,56.4583333333333,52.375,54.9583333333333,59.125,58.7916666666667,58.2916666666667,46.2916666666667,49.2916666666667,61.9583333333333,59.4583333333333,45.5416666666667,56.7083333333333,62.2083333333333,56.2916666666667,62.7083333333333,63.5416666666667,64.125,60.0416666666667,51.5416666666667,58.7916666666667,61.5416666666667,52.5416666666667,60.0416666666667,57.625],6,null,"background",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#BEBEBE","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[41.875,-0.124999999999993,65.125,30.0416666666667,true,"background","Zoom to background","<strong> background <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"background",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#BEBEBE"],"labels":["background"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"background"}]}],"limits":{"lat":[-0.124999999999993,30.0416666666667],"lng":[41.875,65.125]},"fitBounds":[-0.124999999999993,41.875,30.0416666666667,65.125,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
</section>
<section id="saving-background-samples" class="level3">
<h3 class="anchored" data-anchor-id="saving-background-samples">Saving background samples</h3>
<p>There are no background points on land. We can now save the background locations to our local machine.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>absence_geo <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dir_data, <span class="st">"absence.geojson"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>pts_absence_csv <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dir_data, <span class="st">"pts_absence.csv"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(background, pts_absence_csv, <span class="at">layer_options =</span> <span class="st">"GEOMETRY=AS_XY"</span>, <span class="at">append =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Deleting layer `pts_absence' using driver `CSV'
Writing layer `pts_absence' to data source 
  `/home/jovyan/R/ohw23_proj_marinesdms/data/raw-bio/pts_absence.csv' using driver `CSV'
options:        GEOMETRY=AS_XY 
Updating existing layer pts_absence
Writing 1000 features with 0 fields and geometry type Point.</code></pre>
</div>
</div>
</section>
</section>
<section id="approach-3.-random-points-a-convex-hull" class="level2">
<h2 class="anchored" data-anchor-id="approach-3.-random-points-a-convex-hull">Approach 3. Random points a convex hull</h2>
<p>This section has been adapted from <a href="https://bbest.github.io/eds232-ml/lab1a_sdm-explore.html">this online tutorial</a> and <a href="https://github.com/BigelowLab/maxnet/wiki/stars">this online tutorial</a>.</p>
<p>NEED TO ADD</p>
<p>The next notebook will discuss how to get environmental data that we will use as inputs in our SDM from the <code>sdmpredictors</code> package.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../tutorial/01_Presence_Data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Marine Presence Data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../tutorial/03_sdmpredictors-variables.html" class="pagination-link">
        <span class="nav-page-text">Environmental Variables</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">2023 OceanHackWeek</div>
  </div>
</footer>



</body></html>